(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/jiaofeiqingdan/add-or-update"],{"1a43":function(n,e,a){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(a("a34a"));function i(n){return n&&n.__esModule?n:{default:n}}function r(n,e,a,t,i,r,u){try{var o=n[r](u),c=o.value}catch(g){return void a(g)}o.done?e(c):Promise.resolve(c).then(t,i)}function u(n){return function(){var e=this,a=arguments;return new Promise((function(t,i){var u=n.apply(e,a);function o(n){r(u,t,i,o,c,"next",n)}function c(n){r(u,t,i,o,c,"throw",n)}o(void 0)}))}}var o=function(){Promise.all([a.e("common/vendor"),a.e("components/w-picker/w-picker")]).then(function(){return resolve(a("76a0"))}.bind(null,a)).catch(a.oe)},c={data:function(){return{ruleForm:{danhao:this.getUUID(),xueshengzhanghao:"",xueshengxingming:"",loucenghao:"",yongdianliang:"",jine:"",zhuangtai:"",jiaofeishijian:"",dengjiriqi:"",zhanghao:"",xingming:"",tupian:"",userid:""},xueshengzhanghaoOptions:[],xueshengzhanghaoIndex:0,zhuangtaiOptions:[],zhuangtaiIndex:0,user:{},ro:{danhao:!1,xueshengzhanghao:!1,xueshengxingming:!1,loucenghao:!1,yongdianliang:!1,jine:!1,zhuangtai:!1,jiaofeishijian:!1,dengjiriqi:!1,zhanghao:!1,xingming:!1,tupian:!1,userid:!1}}},components:{wPicker:o},computed:{},onLoad:function(e){var a=this;return u(t.default.mark((function i(){var r,u,o,c;return t.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=n.getStorageSync("nowTable"),i.next=3,a.$api.session(r);case 3:return u=i.sent,a.user=u.data,a.ruleForm.zhanghao=a.user.zhanghao,a.ruleForm.xingming=a.user.xingming,i.next=9,a.$api.option("yongdianqingkuang","xueshengzhanghao",{});case 9:if(u=i.sent,a.xueshengzhanghaoOptions=u.data,a.zhuangtaiOptions="已缴费,未缴费".split(","),a.ruleForm.userid=n.getStorageSync("userid"),e.refid&&(a.ruleForm.refid=e.refid,a.ruleForm.nickname=n.getStorageSync("nickname")),!e.id){i.next=20;break}return a.ruleForm.id=e.id,i.next=18,a.$api.info("jiaofeiqingdan",a.ruleForm.id);case 18:u=i.sent,a.ruleForm=u.data;case 20:if(!e.cross){i.next=79;break}o=n.getStorageSync("crossObj"),i.t0=t.default.keys(o);case 23:if((i.t1=i.t0()).done){i.next=79;break}if(c=i.t1.value,"danhao"!=c){i.next=29;break}return a.ruleForm.danhao=o[c],a.ro.danhao=!0,i.abrupt("continue",23);case 29:if("xueshengzhanghao"!=c){i.next=33;break}return a.ruleForm.xueshengzhanghao=o[c],a.ro.xueshengzhanghao=!0,i.abrupt("continue",23);case 33:if("xueshengxingming"!=c){i.next=37;break}return a.ruleForm.xueshengxingming=o[c],a.ro.xueshengxingming=!0,i.abrupt("continue",23);case 37:if("loucenghao"!=c){i.next=41;break}return a.ruleForm.loucenghao=o[c],a.ro.loucenghao=!0,i.abrupt("continue",23);case 41:if("yongdianliang"!=c){i.next=45;break}return a.ruleForm.yongdianliang=o[c],a.ro.yongdianliang=!0,i.abrupt("continue",23);case 45:if("jine"!=c){i.next=49;break}return a.ruleForm.jine=o[c],a.ro.jine=!0,i.abrupt("continue",23);case 49:if("zhuangtai"!=c){i.next=53;break}return a.ruleForm.zhuangtai=o[c],a.ro.zhuangtai=!0,i.abrupt("continue",23);case 53:if("jiaofeishijian"!=c){i.next=57;break}return a.ruleForm.jiaofeishijian=o[c],a.ro.jiaofeishijian=!0,i.abrupt("continue",23);case 57:if("dengjiriqi"!=c){i.next=61;break}return a.ruleForm.dengjiriqi=o[c],a.ro.dengjiriqi=!0,i.abrupt("continue",23);case 61:if("zhanghao"!=c){i.next=65;break}return a.ruleForm.zhanghao=o[c],a.ro.zhanghao=!0,i.abrupt("continue",23);case 65:if("xingming"!=c){i.next=69;break}return a.ruleForm.xingming=o[c],a.ro.xingming=!0,i.abrupt("continue",23);case 69:if("tupian"!=c){i.next=73;break}return a.ruleForm.tupian=o[c],a.ro.tupian=!0,i.abrupt("continue",23);case 73:if("userid"!=c){i.next=77;break}return a.ruleForm.userid=o[c],a.ro.userid=!0,i.abrupt("continue",23);case 77:i.next=23;break;case 79:a.styleChange();case 80:case"end":return i.stop()}}),i)})))()},methods:{styleChange:function(){this.$nextTick((function(){}))},xueshengzhanghaoChange:function(n){var e=this;return u(t.default.mark((function a(){var i;return t.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.xueshengzhanghaoIndex=n.target.value,e.ruleForm.xueshengzhanghao=e.xueshengzhanghaoOptions[e.xueshengzhanghaoIndex],a.next=4,e.$api.follow("yongdianqingkuang","xueshengzhanghao",{columnValue:e.ruleForm.xueshengzhanghao});case 4:i=a.sent,i.data.xueshengxingming&&(e.ruleForm.xueshengxingming=i.data.xueshengxingming),i.data.loucenghao&&(e.ruleForm.loucenghao=i.data.loucenghao),i.data.yongdianliang&&(e.ruleForm.yongdianliang=i.data.yongdianliang),i.data.jine&&(e.ruleForm.jine=i.data.jine);case 9:case"end":return a.stop()}}),a)})))()},dengjiriqiChange:function(n){this.ruleForm.dengjiriqi=n.target.value,this.$forceUpdate()},jiaofeishijianConfirm:function(n){console.log(n),this.ruleForm.jiaofeishijian=n.result,this.$forceUpdate()},zhuangtaiChange:function(n){this.zhuangtaiIndex=n.target.value,this.ruleForm.zhuangtai=this.zhuangtaiOptions[this.zhuangtaiIndex]},tupianTap:function(){var n=this;this.$api.upload((function(e){n.ruleForm.tupian=n.$base.url+"upload/"+e.file,n.$forceUpdate(),n.$nextTick((function(){n.styleChange()}))}))},getUUID:function(){return(new Date).getTime()},onSubmitTap:function(){var n=this;return u(t.default.mark((function e(){return t.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.ruleForm.userid){e.next=3;break}return n.$utils.msg("用户id不能为空"),e.abrupt("return");case 3:if(!n.ruleForm.id){e.next=8;break}return e.next=6,n.$api.update("jiaofeiqingdan",n.ruleForm);case 6:e.next=10;break;case 8:return e.next=10,n.$api.add("jiaofeiqingdan",n.ruleForm);case 10:n.$utils.msgBack("提交成功");case 11:case"end":return e.stop()}}),e)})))()},optionsChange:function(n){this.index=n.target.value},bindDateChange:function(n){this.date=n.target.value},getDate:function(n){var e=new Date,a=e.getFullYear(),t=e.getMonth()+1,i=e.getDate();return"start"===n?a-=60:"end"===n&&(a+=2),t=t>9?t:"0"+t,i=i>9?i:"0"+i,"".concat(a,"-").concat(t,"-").concat(i)},toggleTab:function(n){this.$refs[n].show()}}};e.default=c}).call(this,a("543d")["default"])},2236:function(n,e,a){"use strict";(function(n){a("6a7c");t(a("66fd"));var e=t(a("666f"));function t(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,a("543d")["createPage"])},"26a9":function(n,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return t}));var t={wPicker:function(){return Promise.all([a.e("common/vendor"),a.e("components/w-picker/w-picker")]).then(a.bind(null,"76a0"))}},i=function(){var n=this,e=n.$createElement;n._self._c},r=[]},6414:function(n,e,a){},"666f":function(n,e,a){"use strict";a.r(e);var t=a("26a9"),i=a("b5ed");for(var r in i)"default"!==r&&function(n){a.d(e,n,(function(){return i[n]}))}(r);a("7137");var u,o=a("f0c5"),c=Object(o["a"])(i["default"],t["b"],t["c"],!1,null,"3c01d78c",null,!1,t["a"],u);e["default"]=c.exports},7137:function(n,e,a){"use strict";var t=a("6414"),i=a.n(t);i.a},b5ed:function(n,e,a){"use strict";a.r(e);var t=a("1a43"),i=a.n(t);for(var r in t)"default"!==r&&function(n){a.d(e,n,(function(){return t[n]}))}(r);e["default"]=i.a}},[["2236","common/runtime","common/vendor"]]]);